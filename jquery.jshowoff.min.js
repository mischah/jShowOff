/*

Title:		jShowOff: a jQuery Content Rotator Plugin
Author:		Erik Kallevig
Version:	0.1.3
Website:	http://ekallevig.com/jshowoff
License: 	Dual licensed under the MIT and GPL licenses.

*/

(function(e){e.fn.jshowoff=function(t){var n={animatePause:!0,autoPlay:!0,changeSpeed:600,controls:!0,controlText:{play:"Play",pause:"Pause",next:"Next",previous:"Previous"},effect:"fade",hoverPause:!0,links:!0,speed:3e3};t&&e.extend(!0,n,t);if(n.speed<n.changeSpeed+20){alert("jShowOff: Make speed at least 20ms longer than changeSpeed; the fades aren't always right on time.");return this}this.each(function(t){function h(t,i){var s=o;if(o>=t.length||i>=t.length){o=0;var u=!0}else if(o<0||i<0){o=t.length-1;var a=!0}else o=i;if(n.effect=="slideLeft"){var l,c;function h(e){l=e=="right"?"left":"right";c=e=="left"?"left":"right"}o>=s?h("left"):h("right");e(t[o]).clone().appendTo(r).slideIt({direction:l,changeSpeed:n.changeSpeed});r.children().length>1&&r.children().eq(0).css("position","absolute").slideIt({direction:c,showHide:"hide",changeSpeed:n.changeSpeed},function(){e(this).remove()})}else if(n.effect=="fade"){e(t[o]).clone().appendTo(r).hide().fadeIn(n.changeSpeed,function(){(e("html").hasClass("oldie")||e("html").hasClass("lt-ie9"))&&this.style.removeAttribute("filter")});r.children().length>1&&r.children().eq(0).css("position","absolute").fadeOut(n.changeSpeed,function(){e(this).remove()})}else if(n.effect=="none"){e(t[o]).clone().appendTo(r);r.children().length>1&&r.children().eq(0).css("position","absolute").remove()}if(n.links){e("."+f+"-active").removeClass(f+"-active jshowoff-active");e("."+f+"-slidelinks a").eq(o).addClass(f+"-active jshowoff-active")}}function p(){return e("."+f+"-play").hasClass("jshowoff-paused")?!1:!0}function d(t){if(!y()){o++;h(i,o);if(t=="hover"||!p())s=setInterval(function(){d()},n.speed);p()||e("."+f+"-play").text(n.controlText.pause).removeClass("jshowoff-paused "+f+"-paused")}}function v(t){clearInterval(s);(!t||t=="playBtn")&&e("."+f+"-play").text(n.controlText.play).addClass("jshowoff-paused "+f+"-paused");n.animatePause&&t=="playBtn"&&e('<p class="'+f+'-pausetext jshowoff-pausetext">'+n.controlText.pause+"</p>").css({fontSize:"62%",textAlign:"center",position:"absolute",top:"40%",lineHeight:"100%",width:"100%"}).appendTo(c).addClass(f+"pauseText").animate({fontSize:"600%",top:"30%",opacity:0},{duration:500,complete:function(){e(this).remove()}})}function m(){b(o+1)}function g(){b(o-1)}function y(){return r.children().length>1?!0:!1}function b(e){r.children().stop(!0,!0);if(o!=e||o==e&&y()){y()&&r.children().eq(0).remove();h(i,e);v()}}function w(){e(i).each(function(t){e(this).find("img").each(function(t){u[t]=e("<img>").attr("src",e(this).attr("src"))})})}function E(){c.append('<p class="jshowoff-controls '+f+'-controls"><a class="jshowoff-play '+f+'-play" href="#null">'+n.controlText.pause+'</a> <a class="jshowoff-prev '+f+'-prev" href="#null">'+n.controlText.previous+'</a> <a class="jshowoff-next '+f+'-next" href="#null">'+n.controlText.next+"</a></p>");e("."+f+"-controls a").each(function(){e(this).hasClass("jshowoff-play")&&e(this).click(function(){p()?v("playBtn"):d();return!1});e(this).hasClass("jshowoff-prev")&&e(this).click(function(){g();return!1});e(this).hasClass("jshowoff-next")&&e(this).click(function(){m();return!1})})}function S(){c.append('<p class="jshowoff-slidelinks '+f+'-slidelinks"></p>');e.each(i,function(t,n){var r=e(this).attr("title")||t+1;e('<a class="jshowoff-slidelink-'+t+" "+f+"-slidelink-"+t+'" href="#null">'+r+"</a>").bind("click",{index:t},function(e){b(e.data.index);return!1}).appendTo("."+f+"-slidelinks")})}var r=e(this),i=e(this).children().remove(),s="",o=0,u=[],a=e(".jshowoff").length+1,f="jshowoff-"+a,l=n.cssClass!=undefined?n.cssClass:"";r.css("position","relative").wrap('<div class="jshowoff '+f+'" />');var c=e("."+f);c.css("position","relative").addClass(l);e(i[0]).clone().appendTo(r);w();if(n.controls){E();n.autoPlay==0&&e("."+f+"-play").addClass(f+"-paused jshowoff-paused").text(n.controlText.play)}if(n.links){S();e("."+f+"-slidelinks a").eq(0).addClass(f+"-active jshowoff-active")}n.hoverPause&&r.hover(function(){p()&&v("hover")},function(){p()&&d("hover")});n.autoPlay&&i.length>1&&(s=setInterval(function(){d()},n.speed));i.length<1&&e("."+f).append("<p>For jShowOff to work, the container element must have child elements.</p>")});return this}})(jQuery);(function(e){e.fn.slideIt=function(t,n){var r={direction:"left",showHide:"show",changeSpeed:600};t&&e.extend(r,t);this.each(function(t){e(this).css({left:"auto",right:"auto",top:"auto",bottom:"auto"});var i=r.direction=="left"||r.direction=="right"?e(this).outerWidth():e(this).outerHeight(),s={};s.position=e(this).css("position")=="static"?"relative":e(this).css("position");s[r.direction]=r.showHide=="show"?"-"+i+"px":0;var o={};o[r.direction]=r.showHide=="show"?0:"-"+i+"px";e(this).css(s).animate(o,r.changeSpeed,n)});return this}})(jQuery);